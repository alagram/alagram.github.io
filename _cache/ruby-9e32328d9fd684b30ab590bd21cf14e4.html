<div class="highlight"><pre><span class="c1"># lib/tasks/deploy.rake</span>

<span class="nb">require</span> <span class="s1">&#39;paratrooper&#39;</span>

<span class="n">namespace</span> <span class="ss">:deploy</span> <span class="k">do</span>
 <span class="n">desc</span> <span class="s1">&#39;Deploy app in staging environment&#39;</span>
 <span class="n">task</span> <span class="ss">:staging</span> <span class="k">do</span>
   <span class="n">deployment</span> <span class="o">=</span> <span class="no">Paratrooper</span><span class="o">::</span><span class="no">Deploy</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;googleclone-staging&quot;</span><span class="p">,</span> <span class="ss">tag</span><span class="p">:</span> <span class="s1">&#39;staging&#39;</span><span class="p">)</span>

   <span class="n">deployment</span><span class="o">.</span><span class="n">deploy</span>
 <span class="k">end</span>

 <span class="n">desc</span> <span class="s1">&#39;Deploy app in production environment&#39;</span>
 <span class="n">task</span> <span class="ss">:production</span> <span class="k">do</span>
   <span class="n">deployment</span> <span class="o">=</span> <span class="no">Paratrooper</span><span class="o">::</span><span class="no">Deploy</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;googleclone&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">deploy</span><span class="o">|</span>
     <span class="n">deploy</span><span class="o">.</span><span class="n">tag</span>              <span class="o">=</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
     <span class="n">deploy</span><span class="o">.</span><span class="n">match_tag</span>        <span class="o">=</span> <span class="s1">&#39;staging&#39;</span>
   <span class="k">end</span>

   <span class="n">deployment</span><span class="o">.</span><span class="n">deploy</span>
 <span class="k">end</span>
<span class="k">end</span>
</pre></div>